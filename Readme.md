# Аттестационная работа "Электронная торговая сеть - Django API"

Проект представляет собой систему управления торговой сетью для продажи электроники. 
Система моделирует иерархию участников торговли: заводы, сети и индивидуальные предприниматели. 
В проекте реализованы функции управления участниками сети, продуктами, а также механизм контроля 
доступа на основе ролей.

1. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/SerjMonstrX/electronic_net.git
    ```
2. Установите зависимости, используя Poetry:
       poetry install

3. Настройте PostgreSQL:
Создайте базу данных PostgreSQL, внесите настройки для БД в .env

4. Примените миграции:
    ```bash
    python manage.py makemigrations
    python manage.py migrate

## Структура


- **`network/`**: Приложение для управления участниками сети. Включает модели и логику для заводов,
розничных сетей и индивидуальных предпринимателей, поддерживая их иерархические отношения и связи
с поставщиками.


- **`products/`**: Приложение для управления продуктами. Реализует модели и API для создания, 
обновления, просмотра и удаления продуктов, с учетом логики поставщиков: продукты могут производиться
только на заводах, а другие звенья сети могут владеть только продуктами, доступными у их поставщиков.


- **`users/`**: Приложение для управления пользователями и аутентификацией. Включает модели для 
кастомного пользователя, аутентификацию с использованием JWT, а также систему ролей и разрешений 
(модераторы, владельцы, участники сети).


- **`electronic_net/`**: Главный проект, содержащий настройки и корневые файлы. Управляет 
маршрутизацией, конфигурацией проекта и интеграцией всех приложений.


## Иерархия модели NetworkEntity
Сеть представляет собой иерархическую структуру, уровень которой определяется
уровнем поставщика, предыдущего по иерархии, при этом он не ограничен тремя уровнями,
что позволяет выстраивать более глубокие и гибкие связи.

Уровень 0 - всегда завод.

Далее уровень определяется как +1 от уровня поставщика.

*Если поставщик не привязан и тип поставщика не завод, то по умолчанию задается уровень 1.
Допустим, при создании новых объектов сети, еще без привязки к поставщику.

В дальнейшем уровень будет скорректирован после задания поля поставщика.

## Аутентификация и авторизация:
Реализована с использованием JWT токенов для защиты API от неавторизованных пользователей.


## Роли и права доступа
Проект использует кастомные разрешения для управления доступом:

-Модераторы имеют полные права для управления всеми объектами.

-Создатели могут редактировать и удалять только свои объекты.

-Обычные пользователи имеют доступ только к публичной информации, без возможности редактирования/удаления чужих объектов.

## Документация
Для проекта настроен вывод документации через swagger или redoc

      http://127.0.0.1:8000/swagger/

      http://127.0.0.1:8000/redoc/

## Тестирование
Основной функционал протестирован, вывести результаты можно с помощью:

      coverage report
